{% include 'header.html' %}
<div class='row'>
	
	<!-- Sidebar -->
	{% include 'sidebar.html' %}
	
	<div class='col-md-10'  ng-controller="serverLinkControl" data-ng-init='init()'>

		<!-- Info bar -->
		{% include 'infobar.html' %}
		<div class='row taskrunner'>
				<div class='col-md-10'>
					<div ng-repeat='server in tasks'>
						<h3>{{server.name | angular }}</h3>
						<div ng-repeat='task in server.tasks'>
							<br>
							<div class='taskbar'>
								<div ng-if='task.event == "ok"' class="row row-centered">
									<div class="col-md-12 col-centered">
										<b class="status-text">Status: <span class='success'>{{task.event | angular}}</span></b>
										<div class="details-expand">
											<div ng-click="showDetails($event)" class="btn btn-primary btn-xs show-details">
												Details
											</div>
											<div class="details">
												<b>{{task | angular}}</b>
											</div>
										</div>
									</div>
								</div>
								<div ng-if='task.event !== "ok"' class="row row-centered">
									<div class="col-md-12 col-centered">
										<p>Status: <span class='changed'>{{task.event | angular}}</span></p>
										<div class="details-expand">
											<div ng-click="showDetails($event)" class="btn btn-primary btn-xs show-details">
												Details
											</div>
											<div class="details">
												<b>{{task | angular}}</b>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		<div class='row' role="contain" ng-switch on="!!site.currentBook" >
			<h1 class="row"> {{site.currentBook.name | angular}}</h1>
			
			<div class="pageWrap" ng-switch-when="true">
				<fieldset class='row section-contain' ng-repeat="book in site.currentBook.fields">
					<div class="col-md-3 col-md-offset-1">
						<!-- <h3 class="section-title"> {{ book.name | angular }} </h3> -->
						<p class="detail"> {{ book.label | angular }} </p>
						<hr />
						<input ng-if="book.element == 'input'" type="{{book.type | angular}}" ng-model="book.bindingData.model_bind" ng-required="book.bindingData.model_required"></input>
					<select ng-if="book.element == 'select'" type="{{book.type | angular}}" ng-model="book.bindingData.model_bind" ng-options="o as o for o in book.bindingData.model_options" ng-required="book.bindingData.model_required"></select>
				</div>
			</fieldset>
			
			
			<div class='col-md-11 col-md-offset-1'>
				<button ng-click='go()' class="btn btn-default btn-lg" >Submit</button>
			</div>
			
		</div>
		<div class="pageWrap" ng-switch-default>
			{% include 'versions.html' %}
		</div>
		
	</div>

	
</div>
</div>
{% include 'footer.html' %}